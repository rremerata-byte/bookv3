import{l as y,T as k,r as w,b as _,w as B,o as l,e as o,g as c,p as m,v as f,i as n,t as d,k as a,s as v,z as x,F as h,n as D}from"./vendor-D6j6WTf-.js";import{L as A}from"./FrontEndLayout-BB7Mop1q.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const P={components:{Link:y,Layout:A},props:{recentBooks:{type:Array,default:()=>[]},courses:{type:Array,default:()=>[]}},data(){return{imagePreview:null,showQrModal:!1,qrCodeSvg:null,dragActive:!1,currentBookIndex:-1}},setup(){return{form:k({title:"",author:"",bookId:"",publicationDate:"",dateAcquired:"",description:"",course:"",subject_for:"",amount:"",availability:"Available",image:null})}},computed:{hasPreviousBooks(){return this.recentBooks&&this.recentBooks.length>0},filteredSubjects(){if(!this.form.course)return[];const s=this.courses.find(e=>e.code===this.form.course);return s?s.subjects:[]}},methods:{handleAddBook(){this.form.post(route("books.store"),{onSuccess:s=>{this.form.reset(),this.imagePreview=null,alert("Book added successfully!")}})},closeQrModal(){this.showQrModal=!1,this.qrCodeSvg=null},previewImage(s){const e=s.target.files[0];e&&(this.form.image=e,this.imagePreview=URL.createObjectURL(e))},handleDragOver(s){s.preventDefault(),this.dragActive=!0},handleDragLeave(s){s.preventDefault(),this.dragActive=!1},handleDrop(s){var g;s.preventDefault(),this.dragActive=!1;const e=((g=s.dataTransfer)==null?void 0:g.files)&&s.dataTransfer.files[0];e&&(this.form.image=e,this.imagePreview=URL.createObjectURL(e))},loadPreviousBook(){if(!this.hasPreviousBooks)return;this.currentBookIndex===-1?this.currentBookIndex=0:this.currentBookIndex=(this.currentBookIndex+1)%this.recentBooks.length;const s=this.recentBooks[this.currentBookIndex];this.form.title=s.title||"",this.form.author=s.author||"",this.form.bookId=s.bookId||"",this.form.publicationDate=s.publicationDate||"",this.form.dateAcquired=s.dateAcquired||"",this.form.description=s.description||"",this.form.course=s.course||"",this.form.subject_for=s.subject_for||"",this.form.amount=s.amount||"",s.image_path?(this.imagePreview=`/storage/${s.image_path}`,fetch(`/storage/${s.image_path}`).then(r=>r.blob()).then(r=>{const u=s.image_path.split("/").pop(),i=new File([r],u,{type:r.type});this.form.image=i}).catch(r=>{console.error("Error loading image:",r),this.form.image=null})):(this.imagePreview=null,this.form.image=null);const e=this.currentBookIndex+1,g=this.recentBooks.length;alert(`Loaded book ${e} of ${g} recent books: "${s.title}"`)}}},C={class:"ml-64 p-6 flex-1 min-h-screen relative"},j={class:"max-w-5xl mx-auto relative"},L={class:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden border border-gray-300"},S={class:"grid grid-cols-1 md:grid-cols-3 gap-6 p-8"},q={class:"md:col-span-2"},U={class:"col-span-2 lg:col-span-1"},V={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},M={key:0,class:"text-red-500 text-xs mt-1"},R={class:"col-span-2 lg:col-span-1"},N={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},O={key:0,class:"text-red-500 text-xs mt-1"},Q={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},T={key:0,class:"text-red-500 text-xs mt-1"},z={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},F={key:0,class:"text-red-500 text-xs mt-1"},E={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},K={key:0,class:"text-red-500 text-xs mt-1"},G={class:"col-span-2"},H={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},J={key:0,class:"text-red-500 text-xs mt-1"},W={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},X=["value"],Y={key:0,class:"text-red-500 text-xs mt-1"},Z={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},$=["disabled"],ee={value:""},oe=["value"],re={key:0,class:"text-red-500 text-xs mt-1"},te={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},se={key:0,class:"text-red-500 text-xs mt-1"},ie={key:0,class:"mt-3 flex items-center space-x-3"},de=["src"],le={class:"text-sm text-gray-600"},ne={class:"font-medium"},ae={class:"text-xs mt-1"},me={class:"mt-2"},ue={key:1,class:"text-red-500 text-xs mt-1"},fe={class:"col-span-2 flex items-center justify-between mt-3"},ge={class:"flex space-x-2"},ce=["disabled"],be=["disabled"];function ve(s,e,g,r,u,i){const p=w("Layout");return l(),_(p,null,{default:B(()=>{var b;return[o("div",C,[e[33]||(e[33]=o("div",{class:"fixed inset-0 ml-64 -z-10 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"},[o("div",{class:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-blue-300/30 to-indigo-400/30 rounded-full blur-3xl animate-pulse"}),o("div",{class:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-br from-purple-300/30 to-pink-400/30 rounded-full blur-3xl animate-pulse",style:{"animation-delay":"1s"}}),o("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-indigo-300/20 to-blue-400/20 rounded-full blur-3xl animate-pulse",style:{"animation-delay":"2s"}}),o("div",{class:"absolute inset-0 bg-grid-pattern opacity-5"})],-1)),o("div",j,[o("div",L,[o("div",S,[e[32]||(e[32]=o("div",{class:"md:col-span-1 flex flex-col items-center justify-center space-y-4"},[o("div",{class:"h-36 w-36 rounded-lg bg-gradient-to-br from-indigo-500 to-blue-500 flex items-center justify-center text-white text-2xl font-bold"},"ðŸ“š"),o("h2",{class:"text-lg font-semibold"},"Add New Book"),o("p",{class:"text-sm text-gray-500 text-center"},"Quickly add a book to the catalog. Add a cover image and we'll show a preview and generate a QR code after saving."),o("div",{class:"w-full mt-2"},[o("div",{class:"text-xs text-gray-500"},"Status"),o("div",{class:"mt-1 inline-block px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm"},"Available")])],-1)),o("div",q,[o("form",{onSubmit:e[17]||(e[17]=c((...t)=>i.handleAddBook&&i.handleAddBook(...t),["prevent"])),class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},[o("div",U,[e[18]||(e[18]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Title",-1)),o("div",V,[m(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.form.title=t),type:"text",required:"",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[f,r.form.title]])]),r.form.errors.title?(l(),n("div",M,d(r.form.errors.title),1)):a("",!0)]),o("div",R,[e[19]||(e[19]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Author",-1)),o("div",N,[m(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.form.author=t),type:"text",required:"",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[f,r.form.author]])]),r.form.errors.author?(l(),n("div",O,d(r.form.errors.author),1)):a("",!0)]),o("div",null,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Book ID",-1)),o("div",Q,[m(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>r.form.bookId=t),type:"text",required:"",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[f,r.form.bookId]])]),r.form.errors.bookId?(l(),n("div",T,d(r.form.errors.bookId),1)):a("",!0)]),o("div",null,[e[21]||(e[21]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Publication Date",-1)),o("div",z,[m(o("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>r.form.publicationDate=t),type:"date",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[f,r.form.publicationDate]])]),r.form.errors.publicationDate?(l(),n("div",F,d(r.form.errors.publicationDate),1)):a("",!0)]),o("div",null,[e[22]||(e[22]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Acquired",-1)),o("div",E,[m(o("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>r.form.dateAcquired=t),type:"date",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[f,r.form.dateAcquired]])]),r.form.errors.dateAcquired?(l(),n("div",K,d(r.form.errors.dateAcquired),1)):a("",!0)]),o("div",G,[e[23]||(e[23]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),o("div",H,[m(o("textarea",{"onUpdate:modelValue":e[5]||(e[5]=t=>r.form.description=t),rows:"4",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[f,r.form.description]])]),r.form.errors.description?(l(),n("div",J,d(r.form.errors.description),1)):a("",!0)]),o("div",null,[e[25]||(e[25]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Program",-1)),o("div",W,[m(o("select",{"onUpdate:modelValue":e[6]||(e[6]=t=>r.form.course=t),onChange:e[7]||(e[7]=t=>r.form.subject_for=""),class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition",required:""},[e[24]||(e[24]=o("option",{value:""},"Select a Program...",-1)),(l(!0),n(h,null,x(g.courses,t=>(l(),n("option",{key:t.id,value:t.code},d(t.code)+" - "+d(t.name),9,X))),128))],544),[[v,r.form.course]])]),r.form.errors.course?(l(),n("div",Y,d(r.form.errors.course),1)):a("",!0)]),o("div",null,[e[26]||(e[26]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Course",-1)),o("div",Z,[m(o("select",{"onUpdate:modelValue":e[8]||(e[8]=t=>r.form.subject_for=t),disabled:!r.form.course||i.filteredSubjects.length===0,class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition disabled:bg-gray-100 disabled:cursor-not-allowed"},[o("option",ee,d(r.form.course?i.filteredSubjects.length>0?"Select a Course...":"No Course for this program":"Select a Program first"),1),(l(!0),n(h,null,x(i.filteredSubjects,t=>(l(),n("option",{key:t.id,value:t.name},d(t.code)+" - "+d(t.name),9,oe))),128))],8,$),[[v,r.form.subject_for]])]),r.form.errors.subject_for?(l(),n("div",re,d(r.form.errors.subject_for),1)):a("",!0)]),o("div",null,[e[27]||(e[27]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Amount (Book Cost)",-1)),o("div",te,[m(o("input",{"onUpdate:modelValue":e[9]||(e[9]=t=>r.form.amount=t),type:"number",step:"0.01",min:"0",placeholder:"0.00",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[f,r.form.amount]])]),r.form.errors.amount?(l(),n("div",se,d(r.form.errors.amount),1)):a("",!0)]),o("div",null,[e[30]||(e[30]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cover Image",-1)),o("label",{class:D(["flex flex-col items-center justify-center px-4 py-6 bg-gray-50 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",u.dragActive?"border-indigo-300 bg-indigo-50":"border-gray-200"]),onDragover:e[11]||(e[11]=c((...t)=>i.handleDragOver&&i.handleDragOver(...t),["prevent"])),onDragleave:e[12]||(e[12]=c((...t)=>i.handleDragLeave&&i.handleDragLeave(...t),["prevent"])),onDrop:e[13]||(e[13]=c((...t)=>i.handleDrop&&i.handleDrop(...t),["prevent"]))},[e[28]||(e[28]=o("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})],-1)),e[29]||(e[29]=o("span",{class:"mt-2 text-sm text-gray-600"},"Click to upload or drag and drop",-1)),o("input",{type:"file",class:"hidden",onChange:e[10]||(e[10]=(...t)=>i.previewImage&&i.previewImage(...t)),accept:"image/*"},null,32)],34),u.imagePreview?(l(),n("div",ie,[o("img",{src:u.imagePreview,class:"w-40 h-40 object-cover rounded-lg shadow"},null,8,de),o("div",le,[o("div",ne,d(((b=r.form.image)==null?void 0:b.name)||"Selected image"),1),o("div",ae,d(r.form.image?Math.round(r.form.image.size/1024)+" KB":""),1),o("div",me,[o("button",{type:"button",onClick:e[14]||(e[14]=t=>{r.form.image=null,u.imagePreview=null}),class:"text-sm text-red-600 hover:underline"},"Remove")])])])):a("",!0),r.form.errors.image?(l(),n("div",ue,d(r.form.errors.image),1)):a("",!0)]),o("div",fe,[o("div",ge,[o("button",{type:"button",onClick:e[15]||(e[15]=(...t)=>i.loadPreviousBook&&i.loadPreviousBook(...t)),disabled:!i.hasPreviousBooks,class:"px-4 py-2 rounded-lg border text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:"Load previous book data"},e[31]||(e[31]=[o("i",{class:"fas fa-arrow-left"},null,-1),o("span",null,"Previous",-1)]),8,ce),o("button",{type:"button",onClick:e[16]||(e[16]=t=>{r.form.reset(),u.imagePreview=null,u.currentBookIndex=-1}),class:"px-4 py-2 rounded-lg border text-sm text-gray-700 hover:bg-gray-50"}," Reset ")]),o("button",{type:"submit",disabled:r.form.processing,class:"px-6 py-2 rounded-lg bg-gradient-to-r from-indigo-600 to-blue-600 text-white shadow hover:from-indigo-500 hover:to-blue-500"},"Add Book",8,be)])],32)])])])])])]}),_:1})}const ye=I(P,[["render",ve],["__scopeId","data-v-4b980c55"]]);export{ye as default};
