import{i as v,T as p,r as h,c as y,w as k,o as d,b as o,e as c,j as m,v as u,f as n,t as l,g as a,n as w}from"./app-YMTpYtX6.js";import{L as B}from"./FrontEndLayout-wOQCalah.js";import{_}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D={components:{Link:v,Layout:B},props:{recentBooks:{type:Array,default:()=>[]}},data(){return{imagePreview:null,showQrModal:!1,qrCodeSvg:null,dragActive:!1,currentBookIndex:-1}},setup(){return{form:p({title:"",author:"",bookId:"",publicationDate:"",dateAcquired:"",description:"",course:"",subject_for:"",amount:"",availability:"Available",image:null})}},computed:{hasPreviousBooks(){return this.recentBooks&&this.recentBooks.length>0}},methods:{handleAddBook(){this.form.post(route("books.store"),{onSuccess:s=>{this.form.reset(),this.imagePreview=null,alert("Book added successfully!")}})},closeQrModal(){this.showQrModal=!1,this.qrCodeSvg=null},previewImage(s){const e=s.target.files[0];e&&(this.form.image=e,this.imagePreview=URL.createObjectURL(e))},handleDragOver(s){s.preventDefault(),this.dragActive=!0},handleDragLeave(s){s.preventDefault(),this.dragActive=!1},handleDrop(s){var f;s.preventDefault(),this.dragActive=!1;const e=((f=s.dataTransfer)==null?void 0:f.files)&&s.dataTransfer.files[0];e&&(this.form.image=e,this.imagePreview=URL.createObjectURL(e))},loadPreviousBook(){if(!this.hasPreviousBooks)return;this.currentBookIndex===-1?this.currentBookIndex=0:this.currentBookIndex=(this.currentBookIndex+1)%this.recentBooks.length;const s=this.recentBooks[this.currentBookIndex];this.form.title=s.title||"",this.form.author=s.author||"",this.form.bookId=s.bookId||"",this.form.publicationDate=s.publicationDate||"",this.form.dateAcquired=s.dateAcquired||"",this.form.description=s.description||"",this.form.course=s.course||"",this.form.subject_for=s.subject_for||"",this.form.amount=s.amount||"",s.image_path?(this.imagePreview=`/storage/${s.image_path}`,fetch(`/storage/${s.image_path}`).then(r=>r.blob()).then(r=>{const g=s.image_path.split("/").pop(),i=new File([r],g,{type:r.type});this.form.image=i}).catch(r=>{console.error("Error loading image:",r),this.form.image=null})):(this.imagePreview=null,this.form.image=null);const e=this.currentBookIndex+1,f=this.recentBooks.length;alert(`Loaded book ${e} of ${f} recent books: "${s.title}"`)}}},A={class:"ml-64 p-6 flex-1 min-h-screen relative"},I={class:"max-w-5xl mx-auto relative"},P={class:"bg-white/90 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden border border-gray-300"},j={class:"grid grid-cols-1 md:grid-cols-3 gap-6 p-8"},C={class:"md:col-span-2"},L={class:"col-span-2 lg:col-span-1"},q={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},U={key:0,class:"text-red-500 text-xs mt-1"},V={class:"col-span-2 lg:col-span-1"},S={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},M={key:0,class:"text-red-500 text-xs mt-1"},R={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},O={key:0,class:"text-red-500 text-xs mt-1"},Q={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},T={key:0,class:"text-red-500 text-xs mt-1"},N={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},z={key:0,class:"text-red-500 text-xs mt-1"},E={class:"col-span-2"},F={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},K={key:0,class:"text-red-500 text-xs mt-1"},G={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},H={key:0,class:"text-red-500 text-xs mt-1"},J={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},W={key:0,class:"text-red-500 text-xs mt-1"},X={class:"mt-1 p-2 bg-white border border-gray-50 rounded-md"},Y={key:0,class:"text-red-500 text-xs mt-1"},Z={key:0,class:"mt-3 flex items-center space-x-3"},$=["src"],ee={class:"text-sm text-gray-600"},oe={class:"font-medium"},re={class:"text-xs mt-1"},te={class:"mt-2"},se={key:1,class:"text-red-500 text-xs mt-1"},ie={class:"col-span-2 flex items-center justify-between mt-3"},de={class:"flex space-x-2"},le=["disabled"],ne=["disabled"];function ae(s,e,f,r,g,i){const x=h("Layout");return d(),y(x,null,{default:k(()=>{var b;return[o("div",A,[e[31]||(e[31]=o("div",{class:"fixed inset-0 ml-64 -z-10 bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50"},[o("div",{class:"absolute top-0 left-0 w-96 h-96 bg-gradient-to-br from-blue-300/30 to-indigo-400/30 rounded-full blur-3xl animate-pulse"}),o("div",{class:"absolute bottom-0 right-0 w-96 h-96 bg-gradient-to-br from-purple-300/30 to-pink-400/30 rounded-full blur-3xl animate-pulse",style:{"animation-delay":"1s"}}),o("div",{class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-gradient-to-br from-indigo-300/20 to-blue-400/20 rounded-full blur-3xl animate-pulse",style:{"animation-delay":"2s"}}),o("div",{class:"absolute inset-0 bg-grid-pattern opacity-5"})],-1)),o("div",I,[o("div",P,[o("div",j,[e[30]||(e[30]=o("div",{class:"md:col-span-1 flex flex-col items-center justify-center space-y-4"},[o("div",{class:"h-36 w-36 rounded-lg bg-gradient-to-br from-indigo-500 to-blue-500 flex items-center justify-center text-white text-2xl font-bold"},"ðŸ“š"),o("h2",{class:"text-lg font-semibold"},"Add New Book"),o("p",{class:"text-sm text-gray-500 text-center"},"Quickly add a book to the catalog. Add a cover image and we'll show a preview and generate a QR code after saving."),o("div",{class:"w-full mt-2"},[o("div",{class:"text-xs text-gray-500"},"Status"),o("div",{class:"mt-1 inline-block px-3 py-1 rounded-full bg-green-100 text-green-800 text-sm"},"Available")])],-1)),o("div",C,[o("form",{onSubmit:e[16]||(e[16]=c((...t)=>i.handleAddBook&&i.handleAddBook(...t),["prevent"])),class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},[o("div",L,[e[17]||(e[17]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Title",-1)),o("div",q,[m(o("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>r.form.title=t),type:"text",required:"",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[u,r.form.title]])]),r.form.errors.title?(d(),n("div",U,l(r.form.errors.title),1)):a("",!0)]),o("div",V,[e[18]||(e[18]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Author",-1)),o("div",S,[m(o("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>r.form.author=t),type:"text",required:"",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[u,r.form.author]])]),r.form.errors.author?(d(),n("div",M,l(r.form.errors.author),1)):a("",!0)]),o("div",null,[e[19]||(e[19]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Book ID",-1)),o("div",R,[m(o("input",{"onUpdate:modelValue":e[2]||(e[2]=t=>r.form.bookId=t),type:"text",required:"",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[u,r.form.bookId]])]),r.form.errors.bookId?(d(),n("div",O,l(r.form.errors.bookId),1)):a("",!0)]),o("div",null,[e[20]||(e[20]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Publication Date",-1)),o("div",Q,[m(o("input",{"onUpdate:modelValue":e[3]||(e[3]=t=>r.form.publicationDate=t),type:"date",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[u,r.form.publicationDate]])]),r.form.errors.publicationDate?(d(),n("div",T,l(r.form.errors.publicationDate),1)):a("",!0)]),o("div",null,[e[21]||(e[21]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Date Acquired",-1)),o("div",N,[m(o("input",{"onUpdate:modelValue":e[4]||(e[4]=t=>r.form.dateAcquired=t),type:"date",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[u,r.form.dateAcquired]])]),r.form.errors.dateAcquired?(d(),n("div",z,l(r.form.errors.dateAcquired),1)):a("",!0)]),o("div",E,[e[22]||(e[22]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Description",-1)),o("div",F,[m(o("textarea",{"onUpdate:modelValue":e[5]||(e[5]=t=>r.form.description=t),rows:"4",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[u,r.form.description]])]),r.form.errors.description?(d(),n("div",K,l(r.form.errors.description),1)):a("",!0)]),o("div",null,[e[23]||(e[23]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Course",-1)),o("div",G,[m(o("input",{"onUpdate:modelValue":e[6]||(e[6]=t=>r.form.course=t),type:"text",placeholder:"e.g., Computer Science",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[u,r.form.course]])]),r.form.errors.course?(d(),n("div",H,l(r.form.errors.course),1)):a("",!0)]),o("div",null,[e[24]||(e[24]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Subject For",-1)),o("div",J,[m(o("input",{"onUpdate:modelValue":e[7]||(e[7]=t=>r.form.subject_for=t),type:"text",placeholder:"e.g., Mathematics, Programming",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[u,r.form.subject_for]])]),r.form.errors.subject_for?(d(),n("div",W,l(r.form.errors.subject_for),1)):a("",!0)]),o("div",null,[e[25]||(e[25]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Amount (Book Cost)",-1)),o("div",X,[m(o("input",{"onUpdate:modelValue":e[8]||(e[8]=t=>r.form.amount=t),type:"number",step:"0.01",min:"0",placeholder:"0.00",class:"w-full rounded-md border border-gray-300 shadow-sm p-3 focus:outline-none focus:border-indigo-300 focus:ring-2 focus:ring-indigo-100 transition"},null,512),[[u,r.form.amount]])]),r.form.errors.amount?(d(),n("div",Y,l(r.form.errors.amount),1)):a("",!0)]),o("div",null,[e[28]||(e[28]=o("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Cover Image",-1)),o("label",{class:w(["flex flex-col items-center justify-center px-4 py-6 bg-gray-50 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",g.dragActive?"border-indigo-300 bg-indigo-50":"border-gray-200"]),onDragover:e[10]||(e[10]=c((...t)=>i.handleDragOver&&i.handleDragOver(...t),["prevent"])),onDragleave:e[11]||(e[11]=c((...t)=>i.handleDragLeave&&i.handleDragLeave(...t),["prevent"])),onDrop:e[12]||(e[12]=c((...t)=>i.handleDrop&&i.handleDrop(...t),["prevent"]))},[e[26]||(e[26]=o("svg",{class:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})],-1)),e[27]||(e[27]=o("span",{class:"mt-2 text-sm text-gray-600"},"Click to upload or drag and drop",-1)),o("input",{type:"file",class:"hidden",onChange:e[9]||(e[9]=(...t)=>i.previewImage&&i.previewImage(...t)),accept:"image/*"},null,32)],34),g.imagePreview?(d(),n("div",Z,[o("img",{src:g.imagePreview,class:"w-40 h-40 object-cover rounded-lg shadow"},null,8,$),o("div",ee,[o("div",oe,l(((b=r.form.image)==null?void 0:b.name)||"Selected image"),1),o("div",re,l(r.form.image?Math.round(r.form.image.size/1024)+" KB":""),1),o("div",te,[o("button",{type:"button",onClick:e[13]||(e[13]=t=>{r.form.image=null,g.imagePreview=null}),class:"text-sm text-red-600 hover:underline"},"Remove")])])])):a("",!0),r.form.errors.image?(d(),n("div",se,l(r.form.errors.image),1)):a("",!0)]),o("div",ie,[o("div",de,[o("button",{type:"button",onClick:e[14]||(e[14]=(...t)=>i.loadPreviousBook&&i.loadPreviousBook(...t)),disabled:!i.hasPreviousBooks,class:"px-4 py-2 rounded-lg border text-sm text-gray-700 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",title:"Load previous book data"},e[29]||(e[29]=[o("i",{class:"fas fa-arrow-left"},null,-1),o("span",null,"Previous",-1)]),8,le),o("button",{type:"button",onClick:e[15]||(e[15]=t=>{r.form.reset(),g.imagePreview=null,g.currentBookIndex=-1}),class:"px-4 py-2 rounded-lg border text-sm text-gray-700 hover:bg-gray-50"}," Reset ")]),o("button",{type:"submit",disabled:r.form.processing,class:"px-6 py-2 rounded-lg bg-gradient-to-r from-indigo-600 to-blue-600 text-white shadow hover:from-indigo-500 hover:to-blue-500"},"Add Book",8,ne)])],32)])])])])])]}),_:1})}const fe=_(D,[["render",ae],["__scopeId","data-v-e3d44081"]]);export{fe as default};
